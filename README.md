# AproFleet Manager App

**DY Innovate**ì—ì„œ ì œì¡°í•œ **APRO** ê³¨í”„ì¹´íŠ¸ë¥¼ ìœ„í•œ ì¢…í•©ì ì¸ í”Œë¦¬íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Flutterë¡œ ê°œë°œëœ ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§, ì •ë¹„ ê´€ë¦¬, ì•Œë¦¼ ì²˜ë¦¬, ë¶„ì„ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì•„í‚¤í…ì²˜](#ì•„í‚¤í…ì²˜)
3. [ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…](#ê¸°ëŠ¥-ìƒì„¸-ì„¤ëª…)
4. [ì„¤ì¹˜ ë° ì‹¤í–‰](#ì„¤ì¹˜-ë°-ì‹¤í–‰)
5. [ì‹¤ì‹œê°„ ë°ì´í„° íë¦„](#ì‹¤ì‹œê°„-ë°ì´í„°-íë¦„)
6. [ë„¤ë¹„ê²Œì´ì…˜ ë§¤íŠ¸ë¦­ìŠ¤](#ë„¤ë¹„ê²Œì´ì…˜-ë§¤íŠ¸ë¦­ìŠ¤)
7. [ë°ì´í„° ëª¨ë¸](#ë°ì´í„°-ëª¨ë¸)
8. [í…ŒìŠ¤íŠ¸](#í…ŒìŠ¤íŠ¸)
9. [Mock vs Real API ì „í™˜](#mock-vs-real-api-ì „í™˜)
10. [ë””ìì¸ ì‹œìŠ¤í…œ](#ë””ìì¸-ì‹œìŠ¤í…œ)
11. [ì½”ë“œ í¬ë§· ê·œì¹™](#ì½”ë“œ-í¬ë§·-ê·œì¹™)
12. [ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)
13. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)
14. [ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥](#ë‚´ë³´ë‚´ê¸°-ê¸°ëŠ¥)
15. [ê¸°ì—¬ ê°€ì´ë“œ](#ê¸°ì—¬-ê°€ì´ë“œ)
16. [ë¼ì´ì„ ìŠ¤ ë° í¬ë ˆë”§](#ë¼ì´ì„ ìŠ¤-ë°-í¬ë ˆë”§)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ë¸Œëœë”©
- **ì•± ì´ë¦„**: AproFleet Manager App
- **ê³¨í”„ì¹´íŠ¸ ë¸Œëœë“œ**: APRO
- **ì œì¡°ì‚¬**: DY Innovate
- **ìš©ë„**: ê³¨í”„ì¹´íŠ¸ í”Œë¦¬íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ

### ë‹¤êµ­ì–´ ì§€ì›
ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ìŒ ì–¸ì–´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤:
- **ì˜ì–´** (English)
- **ì¼ë³¸ì–´** (æ—¥æœ¬èª)
- **í•œêµ­ì–´** (í•œêµ­ì–´)

ì–¸ì–´ ì „í™˜ì€ ì„¤ì • ë©”ë‰´ì—ì„œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### ë””ìì¸ ì‹œìŠ¤í…œ
- **í…Œë§ˆ**: ë‹¤í¬ í…Œë§ˆ (ì˜¬ë¸”ë™ ë°°ê²½)
- **ì»¬ëŸ¬ íŒ”ë ˆíŠ¸**: ëª¨ë…¸í¬ë¡¬ ê¸°ë°˜
- **íƒ€ì´í¬ê·¸ë˜í”¼**: ëŒ€ë¬¸ì, letter-spacing ì ìš©
- **UI ìŠ¤íƒ€ì¼**: ì „ë¬¸ì ì´ê³  ë¯¸ë‹ˆë©€í•œ ë””ìì¸

### ì£¼ìš” ê¸°ëŠ¥ ê°œìš”
8ê°œì˜ í•µì‹¬ í˜ì´ì§€ë¡œ êµ¬ì„±ëœ ëª¨ë“ˆì‹ ì•„í‚¤í…ì²˜:

| ëª¨ë“ˆ | í˜ì´ì§€ ID | í˜ì´ì§€ëª… | ìš°ì„ ìˆœìœ„ |
|------|-----------|----------|----------|
| **RT** | RT-001 | Live Map View | P1 |
| **RT** | RT-002 | Cart Detail Monitor | P1 |
| **CM** | CM-001 | Cart Inventory List | P1 |
| **CM** | CM-002 | Cart Registration | P1 |
| **MM** | MM-001 | Work Order List | P1 |
| **MM** | MM-002 | Create Work Order | P1 |
| **AL** | AL-001 | Alert Center | P1 |
| **AR** | AR-001 | Analytics Dashboard | P1 |

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ë ˆì´ì–´ êµ¬ì¡°

```mermaid
graph TB
    subgraph "UI Layer"
        A[Pages] --> B[Widgets]
        B --> C[Controllers]
        C --> D[Router]
    end
    
    subgraph "Business Logic Layer"
        E[Controllers] --> F[Services]
        F --> G[Providers]
        G --> H[Utils]
    end
    
    subgraph "Data Layer"
        I[Repositories] --> J[Adapters]
        J --> K[Seeds]
        K --> L[Models]
    end
    
    A --> E
    E --> I
```

### í´ë” êµ¬ì¡°

```
lib/
â”œâ”€â”€ app.dart                          # ì•± ì§„ì…ì 
â”œâ”€â”€ router/
â”‚   â””â”€â”€ app_router.dart               # ë¼ìš°íŒ… ì„¤ì •
â”œâ”€â”€ theme/
â”‚   â””â”€â”€ app_theme.dart                # í…Œë§ˆ ì„¤ì •
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â””â”€â”€ app_constants.dart        # ìƒìˆ˜ ì •ì˜
â”‚   â”œâ”€â”€ localization/
â”‚   â”‚   â”œâ”€â”€ app_localizations.dart    # ë‹¤êµ­ì–´ ê¸°ë³¸ í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ app_localizations_en.dart # ì˜ì–´ ë²ˆì—­
â”‚   â”‚   â”œâ”€â”€ app_localizations_ja.dart # ì¼ë³¸ì–´ ë²ˆì—­
â”‚   â”‚   â””â”€â”€ app_localizations_ko.dart # í•œêµ­ì–´ ë²ˆì—­
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ providers.dart            # Riverpod í”„ë¡œë°”ì´ë”
â”‚   â”‚   â”œâ”€â”€ mock/
â”‚   â”‚   â”‚   â”œâ”€â”€ mock_api.dart         # Mock API ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ mock_ws_hub.dart      # Mock WebSocket í—ˆë¸Œ
â”‚   â”‚   â”‚   â””â”€â”€ seeds/                # ì‹œë“œ ë°ì´í„°
â”‚   â”‚   â””â”€â”€ repositories/             # ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ code_formatters.dart      # ì½”ë“œ í¬ë§·í„°
â”‚   â”‚   â””â”€â”€ kpi_calculator.dart       # KPI ê³„ì‚°ê¸°
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ navigation_bar.dart       # í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”‚   â”œâ”€â”€ shared_widgets.dart       # ê³µí†µ ìœ„ì ¯
â”‚   â”‚   â”œâ”€â”€ status_bar.dart           # ìƒíƒœë°”
â”‚   â”‚   â”œâ”€â”€ filter_sheet.dart         # í•„í„° ì‹œíŠ¸
â”‚   â”‚   â”œâ”€â”€ steps/
â”‚   â”‚   â”‚   â””â”€â”€ stepper.dart          # ìŠ¤í…Œí¼ ìœ„ì ¯
â”‚   â”‚   â””â”€â”€ qr/
â”‚   â”‚       â””â”€â”€ qr_label.dart         # QR ë¼ë²¨ ìƒì„±
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ map/
â”‚           â””â”€â”€ canvas_map_view.dart  # ìº”ë²„ìŠ¤ ë§µ ë·°
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ models/                       # Freezed ëª¨ë¸
â”‚       â”œâ”€â”€ cart.dart
â”‚       â”œâ”€â”€ work_order.dart
â”‚       â”œâ”€â”€ alert.dart
â”‚       â”œâ”€â”€ telemetry.dart
â”‚       â”œâ”€â”€ kpi.dart
â”‚       â””â”€â”€ user_profile.dart
â””â”€â”€ features/
    â”œâ”€â”€ rt/                           # Real-Time ëª¨ë“ˆ
    â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â”œâ”€â”€ live_map_view.dart    # RT-001
    â”‚   â”‚   â””â”€â”€ cart_detail_monitor.dart # RT-002
    â”‚   â””â”€â”€ controllers/
    â”‚       â””â”€â”€ live_map_controller.dart
    â”œâ”€â”€ cm/                           # Cart Management ëª¨ë“ˆ
    â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â”œâ”€â”€ cart_inventory_list.dart # CM-001
    â”‚   â”‚   â””â”€â”€ cart_registration.dart    # CM-002
    â”‚   â””â”€â”€ controllers/
    â”‚       â””â”€â”€ cart_inventory_controller.dart
    â”œâ”€â”€ mm/                           # Maintenance ëª¨ë“ˆ
    â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â”œâ”€â”€ work_order_list.dart  # MM-001
    â”‚   â”‚   â””â”€â”€ create_work_order.dart    # MM-002
    â”‚   â”œâ”€â”€ controllers/
    â”‚   â”‚   â””â”€â”€ work_order_controller.dart
    â”‚   â””â”€â”€ widgets/
    â”‚       â”œâ”€â”€ wo_card.dart
    â”‚       â”œâ”€â”€ wo_timeline.dart
    â”‚       â””â”€â”€ wo_detail_modal.dart
    â”œâ”€â”€ al/                           # Alerts ëª¨ë“ˆ
    â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â””â”€â”€ alert_center.dart     # AL-001
    â”‚   â”œâ”€â”€ controllers/
    â”‚   â”‚   â””â”€â”€ alert_controller.dart
    â”‚   â””â”€â”€ widgets/
    â”‚       â”œâ”€â”€ alert_card.dart
    â”‚       â”œâ”€â”€ alert_filters.dart
    â”‚       â”œâ”€â”€ alert_detail_modal.dart
    â”‚       â””â”€â”€ alert_rules_panel.dart
    â””â”€â”€ ar/                           # Analytics ëª¨ë“ˆ
        â”œâ”€â”€ pages/
        â”‚   â””â”€â”€ analytics_dashboard.dart # AR-001
        â”œâ”€â”€ controllers/
        â”‚   â””â”€â”€ analytics_controller.dart
        â””â”€â”€ widgets/
            â”œâ”€â”€ kpi_card.dart
            â”œâ”€â”€ charts/
            â”‚   â”œâ”€â”€ fleet_performance_bar.dart
            â”‚   â”œâ”€â”€ battery_health_line.dart
            â”‚   â””â”€â”€ maintenance_pie.dart
            â””â”€â”€ export_modal.dart
```

### ìƒíƒœ ê´€ë¦¬
- **Riverpod**: Provider ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬
- **StateNotifier**: ë°˜ì‘í˜• ìƒíƒœ ì—…ë°ì´íŠ¸
- **AsyncValue**: ë¡œë”©, ì—ëŸ¬, ë°ì´í„° ìƒíƒœ ê´€ë¦¬
- **Selectors**: ì„¸ë°€í•œ ë¦¬ë¹Œë“œ ìµœì í™”

### ë¼ìš°íŒ…
- **go_router**: ì„ ì–¸ì  ë¼ìš°íŒ…
- **ë”¥ë§í¬**: ì•Œë¦¼â†’ì¹´íŠ¸ ìƒì„¸, ì¹´íŠ¸â†’ì‘ì—… ì§€ì‹œ ìƒì„± ë“±
- **í¬ë¡œìŠ¤ ëª¨ë“ˆ**: ëª¨ë“ˆ ê°„ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›

---

## ğŸ”§ ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…

### RT (Real-Time) ëª¨ë“ˆ

#### RT-001 Live Map View
**ì‹¤ì‹œê°„ ê³¨í”„ì½”ìŠ¤ ë§µ ë·°**

ì£¼ìš” ê¸°ëŠ¥:
- **ìº”ë²„ìŠ¤ ê¸°ë°˜ ë§µ**: SVG/Canvasë¡œ êµ¬í˜„ëœ ê³¨í”„ì½”ìŠ¤ ë§µ
- **ì‹¤ì‹œê°„ ìœ„ì¹˜ ì¶”ì **: 12ëŒ€ ì¹´íŠ¸ì˜ ì‹¤ì‹œê°„ ìœ„ì¹˜ í‘œì‹œ
- **ìƒíƒœë³„ ìƒ‰ìƒ êµ¬ë¶„**:
  - ğŸŸ¢ Active (ìš´í–‰ì¤‘) - ì´ˆë¡ìƒ‰
  - ğŸŸ  Idle (ëŒ€ê¸°ì¤‘) - ì£¼í™©ìƒ‰  
  - ğŸ”µ Charging (ì¶©ì „ì¤‘) - íŒŒë€ìƒ‰
  - ğŸ”´ Maintenance (ì •ë¹„ì¤‘) - ë¹¨ê°„ìƒ‰
  - âš« Offline (ì˜¤í”„ë¼ì¸) - íšŒìƒ‰
- **ì¤Œ/í•„í„° ê¸°ëŠ¥**: ì¤Œ ì¸/ì•„ì›ƒ, ìƒíƒœë³„ í•„í„°ë§
- **ì¹´íŠ¸ ìƒì„¸ íŒì—…**: ë§ˆì»¤ í´ë¦­ ì‹œ í…”ë ˆë©”íŠ¸ë¦¬ ì •ë³´ í‘œì‹œ
- **ì‹¤ì‹œê°„ ìƒíƒœ íŒ¨ë„**: í•˜ë‹¨ ìƒíƒœë°”ì— ì „ì²´ ì¹´íŠ¸ í˜„í™©

#### RT-002 Cart Detail Monitor
**ê°œë³„ ì¹´íŠ¸ ìƒì„¸ ëª¨ë‹ˆí„°ë§**

ì£¼ìš” ê¸°ëŠ¥:
- **ì‹¤ì‹œê°„ í…”ë ˆë©”íŠ¸ë¦¬**: ë°°í„°ë¦¬, ì†ë„, ìœ„ì¹˜, ì˜¨ë„, ì „ì••, ì „ë¥˜
- **ì‹œê°ì  ê²Œì´ì§€**: ë°°í„°ë¦¬ ì”ëŸ‰, ì†ë„ê³„, ì˜¨ë„ê³„
- **ì›ê²© ì œì–´ ê¸°ëŠ¥**:
  - Speed Limit: ì†ë„ ì œí•œ ì„¤ì •
  - Message: ìš´ì „ìì—ê²Œ ë©”ì‹œì§€ ì „ì†¡
  - Return to Base: ê¸°ì§€ ë³µê·€ ëª…ë ¹
  - Lock Cart: ì¹´íŠ¸ ì›ê²© ì ê¸ˆ
  - EMERGENCY STOP: ê¸´ê¸‰ ì •ì§€
- **ì•Œë¦¼ ì‹œìŠ¤í…œ**: ë°°í„°ë¦¬ 50% ì´í•˜ ì‹œ ê²½ê³  í‘œì‹œ
- **ë¯¸ë‹ˆë§µ**: ì‹¤ì‹œê°„ ìœ„ì¹˜ ì¶”ì 

### CM (Cart Management) ëª¨ë“ˆ

#### CM-001 Cart Inventory List
**ì¹´íŠ¸ ì¬ê³  ëª©ë¡ ê´€ë¦¬**

ì£¼ìš” ê¸°ëŠ¥:
- **ê²€ìƒ‰ ë° í•„í„°ë§**: ID, ëª¨ë¸ëª…, ìœ„ì¹˜ë¡œ ê²€ìƒ‰
- **ê³ ê¸‰ í•„í„°**:
  - Status: Active, Idle, Charging, Maintenance, Offline
  - Model: EZ-GO, Club Car, Yamaha
  - Battery Level: <20%, 20-50%, 50-80%, >80%
- **ë·° ëª¨ë“œ ì „í™˜**: List View, Grid View, Select Mode
- **í†µê³„ ë°”**: Total, Active, Service, Charging ì¹´ìš´íŠ¸
- **ê°œë³„ ì¹´íŠ¸ ì•¡ì…˜**: Details, Track, Service
- **ì¼ê´„ ì‘ì—…**: ë‹¤ì¤‘ ì„ íƒ, ì¼ê´„ ë°°ì •, ì •ë¹„ ìš”ì²­

#### CM-002 Cart Registration
**ì‹ ê·œ ì¹´íŠ¸ ë“±ë¡**

ì£¼ìš” ê¸°ëŠ¥:
- **4ë‹¨ê³„ ë“±ë¡ í”„ë¡œì„¸ìŠ¤**:
  1. Basic (ê¸°ë³¸ ì •ë³´)
  2. Technical (ê¸°ìˆ  ì‚¬ì–‘)
  3. Components (êµ¬ì„±í’ˆ)
  4. Review (ê²€í† )
- **ìë™ ID ìƒì„±**: GCA-029 í˜•ì‹
- **QR ì½”ë“œ ìƒì„±**: ì¹´íŠ¸ë³„ ê³ ìœ  QR ì½”ë“œ
- **ì´ë¯¸ì§€ ì—…ë¡œë“œ**: ì¹´íŠ¸ ì‚¬ì§„ ì´¬ì˜/ì—…ë¡œë“œ
- **êµ¬ì„±í’ˆ ë“±ë¡**: ë°°í„°ë¦¬, ëª¨í„°, íƒ€ì´ì–´ ë“± ì‹œë¦¬ì–¼ ë²ˆí˜¸
- **ìœ íš¨ì„± ê²€ì¦**: ì‹¤ì‹œê°„ ì…ë ¥ í™•ì¸

### MM (Maintenance) ëª¨ë“ˆ

#### MM-001 Work Order List
**ì‘ì—… ì§€ì‹œì„œ ëª©ë¡ ê´€ë¦¬**

ì£¼ìš” ê¸°ëŠ¥:
- **ì‘ì—… ì§€ì‹œ í†µê³„**: Urgent, Pending, In Progress, Today
- **í•„í„° íƒ­**: All, Urgent, Pending, In Progress, Completed, Timeline
- **ìš°ì„ ìˆœìœ„ í‘œì‹œ**:
  - P1 (Critical): ë¹¨ê°„ìƒ‰ - ê¸´ê¸‰ ëŒ€ì‘
  - P2 (High): ì£¼í™©ìƒ‰ - ë†’ì€ ìš°ì„ ìˆœìœ„
  - P3 (Normal): íŒŒë€ìƒ‰ - ì¼ë°˜ ì‘ì—…
  - P4 (Low): ì´ˆë¡ìƒ‰ - ë‚®ì€ ìš°ì„ ìˆœìœ„
- **íƒ€ì„ë¼ì¸ ë·°**: ì‹œê°„ìˆœ ì‘ì—… ì´ë ¥
- **ì‘ì—… ì§€ì‹œ ìƒì„¸ ëª¨ë‹¬**: ì²´í¬ë¦¬ìŠ¤íŠ¸, ë¶€í’ˆ ëª©ë¡, ìƒíƒœ ì—…ë°ì´íŠ¸
- **ê¸°ìˆ ì ì •ë³´**: ì•„ë°”íƒ€, ë‹´ë‹¹ìëª…, ë¯¸ë°°ì • ìƒíƒœ

#### MM-002 Create Work Order
**ì‘ì—… ì§€ì‹œì„œ ìƒì„±**

ì£¼ìš” ê¸°ëŠ¥:
- **4ë‹¨ê³„ ìƒì„± ë§ˆë²•ì‚¬**:
  1. Type & Priority (ìœ í˜• ë° ìš°ì„ ìˆœìœ„)
  2. Cart & Location (ì¹´íŠ¸ ë° ìœ„ì¹˜)
  3. Schedule & Technician (ì¼ì • ë° ê¸°ìˆ ì)
  4. Parts & Review (ë¶€í’ˆ ë° ê²€í† )
- **QR ìŠ¤ìº”**: ì¹´íŠ¸ ID ìë™ ì¸ì‹
- **ìë™ ìš°ì„ ìˆœìœ„**: ì‘ì—… ìœ í˜•ì— ë”°ë¥¸ ìš°ì„ ìˆœìœ„ ìë™ ì„¤ì •
- **ë¶€í’ˆ ì œì•ˆ**: ì‘ì—… ìœ í˜•ë³„ ìë™ ë¶€í’ˆ ì œì•ˆ
- **ê¸°ìˆ ì ë°°ì •**: ê°€ìš© ìƒíƒœ, ì‘ì—…ëŸ‰ í‘œì‹œ
- **ë“œë˜í”„íŠ¸ ì €ì¥**: ì„ì‹œ ì €ì¥ ê¸°ëŠ¥

### AL (Alerts) ëª¨ë“ˆ

#### AL-001 Alert Center
**ì•Œë¦¼ ì„¼í„°**

ì£¼ìš” ê¸°ëŠ¥:
- **ì•Œë¦¼ ìš”ì•½ ëŒ€ì‹œë³´ë“œ**: Critical, Warning, Info, Resolved
- **ì•Œë¦¼ í•„í„°**: All, Unread, Cart, Battery, Maintenance, Geofence, System
- **ì‹¬ê°ë„ë³„ ìƒ‰ìƒ**:
  - Critical ğŸ›‘: Emergency Stop, Critical Battery
  - Warning âš ï¸: Geofence Violation, Maintenance Due
  - Info â„¹ï¸: Temperature Warning, System Updates
  - Success âœ…: Completed Tasks
- **ì•Œë¦¼ ìƒì„¸ ëª¨ë‹¬**: ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê²½ë¡œ, ì•¡ì…˜ íˆìŠ¤í† ë¦¬
- **ì‹¤ì‹œê°„ ê¸°ëŠ¥**: 10ì´ˆë§ˆë‹¤ ìƒˆ ì•Œë¦¼, 5ì´ˆë§ˆë‹¤ ìƒíƒœ ì—…ë°ì´íŠ¸
- **ì„¤ì • íŒ¨ë„**: Alert Rules, Notifications, Escalation Matrix

### AR (Analytics) ëª¨ë“ˆ

#### AR-001 Analytics Dashboard
**ë¶„ì„ ëŒ€ì‹œë³´ë“œ**

ì£¼ìš” ê¸°ëŠ¥:
- **ê¸°ê°„ ì„ íƒ**: Today, This Week, This Month, Quarter, Year, Custom
- **í•µì‹¬ KPI ì¹´ë“œ**:
  - Availability Rate: ê°€ë™ë¥  (94.8%)
  - MTTR: í‰ê·  ìˆ˜ë¦¬ ì‹œê°„ (18ë¶„)
  - Daily Utilization: ì¼ì¼ í™œìš©ë„ (847km)
- **ì°¨íŠ¸ ì‹œê°í™”**:
  - Fleet Performance (ë§‰ëŒ€ ì°¨íŠ¸)
  - Battery Health Trend (ë¼ì¸ ì°¨íŠ¸)
  - Maintenance Distribution (íŒŒì´ ì°¨íŠ¸)
  - Cost Analysis (ë¹„êµ ê·¸ë¦¬ë“œ)
- **ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥**: PDF Report, Excel Spreadsheet, CSV Data
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: 30ì´ˆë§ˆë‹¤ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸

---

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- **Flutter SDK**: 3.0 ì´ìƒ
- **Dart SDK**: 3.0 ì´ìƒ
- **iOS Simulator** ë˜ëŠ” **Android Emulator**
- **Xcode** (iOS ê°œë°œìš©)
- **Android Studio** (Android ê°œë°œìš©)

### ì„¤ì¹˜ ê³¼ì •

1. **ì €ì¥ì†Œ í´ë¡ **
   ```bash
   git clone <repository-url>
   cd aprofleet_manager_app
   ```

2. **ì˜ì¡´ì„± ì„¤ì¹˜**
   ```bash
   flutter pub get
   ```

3. **ì½”ë“œ ìƒì„±**
   ```bash
   dart run build_runner build --delete-conflicting-outputs
   ```

4. **ì•± ì‹¤í–‰**
   ```bash
   flutter run
   ```

### ê°œë°œ ëª¨ë“œ
- **í•« ë¦¬ë¡œë“œ**: `r` í‚¤ë¡œ í•« ë¦¬ë¡œë“œ
- **í•« ë¦¬ìŠ¤íƒ€íŠ¸**: `R` í‚¤ë¡œ í•« ë¦¬ìŠ¤íƒ€íŠ¸
- **ë””ë²„ê·¸ ì˜µì…˜**: `d` í‚¤ë¡œ ë””ë²„ê·¸ ë©”ë‰´ ì—´ê¸°

### ê¶Œí•œ ì„¤ì •

#### iOS (`ios/Runner/Info.plist`)
```xml
<key>NSCameraUsageDescription</key>
<string>ì´ ì•±ì€ ì¹´íŠ¸ ì‹ë³„ì„ ìœ„í•œ QR ì½”ë“œ ìŠ¤ìº”ì— ì¹´ë©”ë¼ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>ì´ ì•±ì€ ì¹´íŠ¸ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•´ ì‚¬ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.</string>
```

#### Android (`android/app/src/main/AndroidManifest.xml`)
```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
```

---

## ğŸ“¡ ì‹¤ì‹œê°„ ë°ì´í„° íë¦„

### MockWsHub ì‹œë®¬ë ˆì´ì…˜ íƒ€ì´ë¨¸

```mermaid
sequenceDiagram
    participant Timer as MockWsHub
    participant Stream as Data Stream
    participant Controller as Controller
    participant UI as UI Layer
    
    Timer->>Stream: Telemetry (1ì´ˆë§ˆë‹¤)
    Stream->>Controller: Process Data
    Controller->>UI: Update State
    
    Timer->>Stream: Position (3ì´ˆë§ˆë‹¤)
    Stream->>Controller: Process Data
    Controller->>UI: Update State
    
    Timer->>Stream: Alert (10ì´ˆë§ˆë‹¤ ì‹ ê·œ)
    Stream->>Controller: Process Data
    Controller->>UI: Update State
    
    Timer->>Stream: Analytics (30ì´ˆë§ˆë‹¤ Â±2%)
    Stream->>Controller: Process Data
    Controller->>UI: Update State
```

### ì—…ë°ì´íŠ¸ ê°„ê²©
- **í…”ë ˆë©”íŠ¸ë¦¬**: 1ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
- **ìœ„ì¹˜**: 3ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
- **ì•Œë¦¼**: 10ì´ˆë§ˆë‹¤ ì‹ ê·œ ì•Œë¦¼, 5ì´ˆë§ˆë‹¤ ìƒíƒœ ë³€ê²½
- **ë¶„ì„**: 30ì´ˆë§ˆë‹¤ KPI Â±2% ë³€ë™

### ìŠ¤íŠ¸ë¦¼ êµ¬ì¡°
```dart
class MockWsHub {
  Stream<Telemetry> get telemetryStream => _telemetryController.stream;
  Stream<Position> get positionStream => _positionController.stream;
  Stream<Alert> get alertStream => _alertController.stream;
  
  void _startSimulation() {
    Timer.periodic(Duration(seconds: 1), (_) {
      _telemetryController.add(_generateTelemetry());
    });
  }
}
```

---

## ğŸ—ºï¸ ë„¤ë¹„ê²Œì´ì…˜ ë§¤íŠ¸ë¦­ìŠ¤

### í˜ì´ì§€ ê°„ ì´ë™ í”Œë¡œìš°

```mermaid
graph TD
    A[RT-001 Live Map] --> B[RT-002 Cart Detail]
    A --> C[CM-001 Cart Inventory]
    A --> D[MM-001 Work Orders]
    A --> E[AL-001 Alert Center]
    A --> F[AR-001 Analytics]
    
    B --> G[MM-002 Create WO]
    C --> H[CM-002 Cart Registration]
    C --> B
    C --> G
    D --> G
    D --> I[MM-003 WO Detail]
    E --> B
    E --> G
    E --> J[AL-003 Alert Rules]
    F --> K[AR-002 Performance]
    F --> L[AR-006 Export]
```

### ë”¥ë§í¬ ë§¤í•‘
- **ì•Œë¦¼â†’ì¹´íŠ¸ ìƒì„¸**: `context.go('/rt/cart/${alert.cartId}')`
- **ì•Œë¦¼â†’ì‘ì—… ì§€ì‹œ**: `context.go('/mm/create?cart=${alert.cartId}&type=${mappedType}')`
- **ì¹´íŠ¸â†’ì‘ì—… ì§€ì‹œ**: `context.go('/mm/create?cart=${cart.id}')`
- **ì¹´íŠ¸â†’ì¶”ì **: `context.go('/rt/cart/${cart.id}')`

### í¬ë¡œìŠ¤ ëª¨ë“ˆ í†µí•©
- **ê¸´ê¸‰ ëŒ€ì‘ í”Œë¡œìš°**: Alert â†’ Cart Detail â†’ Create WO â†’ Track Progress
- **ì •ê¸° ì ê²€ í”Œë¡œìš°**: Calendar â†’ Select Cart â†’ Checklist â†’ Update History
- **ë°°í„°ë¦¬ ê´€ë¦¬ í”Œë¡œìš°**: Battery Status â†’ Location â†’ Reassign â†’ Notify

---

## ğŸ“Š ë°ì´í„° ëª¨ë¸

### Freezed ëª¨ë¸ êµ¬ì¡°

#### Cart ëª¨ë¸
```dart
@freezed
class Cart with _$Cart {
  const factory Cart({
    required String id,
    required String model,
    required CartStatus status,
    required double batteryPct,
    required double speedKph,
    required LatLng position,
    required DateTime lastSeenAt,
    String? location,
    String? operator,
    Map<String, double>? dailyDistanceKm,
    double? operatingHours,
    double? downtimeHours,
  }) = _Cart;

  factory Cart.fromJson(Map<String, dynamic> json) => _$CartFromJson(json);
}
```

#### WorkOrder ëª¨ë¸
```dart
@freezed
class WorkOrder with _$WorkOrder {
  const factory WorkOrder({
    required String id,
    required WorkOrderType type,
    required Priority priority,
    required String cartId,
    required String description,
    required WorkOrderStatus status,
    required DateTime createdAt,
    required DateTime updatedAt,
    String? location,
    DateTime? scheduledAt,
    Duration? estimatedDuration,
    String? technician,
    List<WoPart>? parts,
    Map<String, bool>? checklist,
    String? notes,
    DateTime? completedAt,
  }) = _WorkOrder;

  factory WorkOrder.fromJson(Map<String, dynamic> json) => _$WorkOrderFromJson(json);
}
```

#### Alert ëª¨ë¸
```dart
@freezed
class Alert with _$Alert {
  const factory Alert({
    required String id,
    required String code,
    required AlertSeverity severity,
    required Priority priority,
    required AlertState state,
    required String title,
    required String message,
    String? cartId,
    String? location,
    required DateTime createdAt,
    required DateTime updatedAt,
    List<AlertAction>? actions,
    int? escalationLevel,
    DateTime? acknowledgedAt,
    String? acknowledgedBy,
    String? resolvedBy,
    DateTime? resolvedAt,
    String? notes,
  }) = _Alert;

  factory Alert.fromJson(Map<String, dynamic> json) => _$AlertFromJson(json);
}
```

### JSON ì§ë ¬í™” ì˜ˆì‹œ
```dart
// Cart ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë³€í™˜
final cart = Cart(
  id: 'GCA-001',
  model: 'APRO-X',
  status: CartStatus.active,
  batteryPct: 85.0,
  speedKph: 15.0,
  position: LatLng(37.5665, 126.9780),
  lastSeenAt: DateTime.now(),
);

final json = cart.toJson();
print(json);
// {
//   "id": "GCA-001",
//   "model": "APRO-X",
//   "status": "active",
//   "batteryPct": 85.0,
//   "speedKph": 15.0,
//   "position": {"lat": 37.5665, "lng": 126.9780},
//   "lastSeenAt": "2025-01-27T10:30:00.000Z"
// }
```

### ì‹œë“œ ë°ì´í„°
- **12ê°œ ì¹´íŠ¸**: GCA-001 ~ GCA-012 (ë‹¤ì–‘í•œ ìƒíƒœì™€ ë°°í„°ë¦¬ ë ˆë²¨)
- **10ê°œ ì‘ì—… ì§€ì‹œì„œ**: WO-2025-0001 ~ 0010 (ëª¨ë“  ìš°ì„ ìˆœìœ„ ë ˆë²¨)
- **8ê°œ ì•Œë¦¼**: ALT-2025-0001 ~ 0008 (ë‹¤ì–‘í•œ ì‹¬ê°ë„ì™€ ìƒíƒœ)
- **ê¸°ìˆ ì**: 8ëª…ì˜ ê¸°ìˆ ì (ë‹¤ì–‘í•œ ê¸°ìˆ  ìˆ˜ì¤€)
- **ë¶€í’ˆ ì¹´íƒˆë¡œê·¸**: 12ê°œ ë¶€í’ˆ (SKU ë° ê°€ê²© ì •ë³´)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (3ê°œ)

#### 1. KPI ê³„ì‚°ê¸° í…ŒìŠ¤íŠ¸
```dart
// test/kpi_calculator_test.dart
void main() {
  group('KpiCalculator', () {
    test('Availability: clamps to [0,100] and handles zero downtime', () {
      // ê°€ë™ë¥  ê³„ì‚° í…ŒìŠ¤íŠ¸
      final kpi = KpiCalculator.fromSamples(
        carts: [cart],
        workOrders: [],
        telemetrySamples: [],
      );
      expect(kpi.availabilityRate, 100);
    });

    test('MTTR: guards divide-by-zero and uses completed repairs only', () {
      // í‰ê·  ìˆ˜ë¦¬ ì‹œê°„ ê³„ì‚° í…ŒìŠ¤íŠ¸
      final kpi = KpiCalculator.fromSamples(
        carts: [],
        workOrders: [completedWorkOrder],
        telemetrySamples: [],
      );
      expect(kpi.mttrMinutes, 90);
    });

    test('Range filtering affects aggregates deterministically', () {
      // ë²”ìœ„ í•„í„°ë§ í…ŒìŠ¤íŠ¸
      final weekKpi = KpiCalculator.fromSamples(
        carts: carts,
        workOrders: [],
        telemetrySamples: [],
        startDate: now.subtract(Duration(days: 7)),
        endDate: now,
      );
      expect(weekKpi.utilizationKm, expectedWeekDistance);
    });
  });
}
```

#### 2. ìš°ì„ ìˆœìœ„ í í…ŒìŠ¤íŠ¸
```dart
// test/priority_queue_test.dart
void main() {
  group('AlertPriorityQueue', () {
    test('Orders by P1..P4 then newest-first within same priority', () {
      final pq = AlertPriorityQueue();
      pq.addAll([aP4Old, aP1Old, aP1New, aP2New]);
      
      expect(pq.removeFirst().id, aP1New.id); // P1, newest
      expect(pq.removeFirst().id, aP1Old.id); // P1, older
      expect(pq.removeFirst().id, aP2New.id); // P2
      expect(pq.removeFirst().id, aP4Old.id); // P4
    });

    test('Acknowledged/Resolved remain in queue with preserved ordering rules', () {
      // í™•ì¸/í•´ê²°ëœ ì•Œë¦¼ë„ íì— ìœ ì§€ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
      final pq = AlertPriorityQueue();
      pq.addAll([aP3Resolved, aP2Acknowledged, aP1Triggered]);
      
      final list = pq.toList();
      expect(list[0].id, aP1Triggered.id); // P1 triggered first
      expect(list[1].id, aP2Acknowledged.id); // P2 acknowledged second
      expect(list[2].id, aP3Resolved.id); // P3 resolved last
    });
  });
}
```

#### 3. ì½”ë“œ í¬ë§·í„° í…ŒìŠ¤íŠ¸
```dart
// test/code_formatter_test.dart
void main() {
  group('CodeFormatters', () {
    test('WorkOrderIdFormatter WO-YYYY-#### zero-pads and increments within year', () {
      final f = WorkOrderIdFormatter(seedYear: 2025, seedCounter: 42);
      expect(f.next(), 'WO-2025-0043');
      expect(f.next(), 'WO-2025-0044');
    });

    test('AlertCodeFormatter ALT-2025-#### maintains separate space from WO', () {
      final alt = AlertCodeFormatter(seedYear: 2025, seedCounter: 9);
      expect(alt.next(), 'ALT-2025-0010');
      expect(alt.next(), 'ALT-2025-0011');
    });
  });
}
```

### ìœ„ì ¯ í…ŒìŠ¤íŠ¸ (2ê°œ)

#### 1. ì•Œë¦¼ ì„¼í„° ë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸
```dart
// test/alert_center_list_test.dart
void main() {
  group('AlertCenterPage Widget Tests', () {
    testWidgets('Filters apply and ack changes state', (tester) async {
      await tester.pumpWidget(
        ProviderScope(
          overrides: [
            alertRepositoryProvider.overrideWithValue(mockAlertRepository),
          ],
          child: MaterialApp(home: AlertCenterPage()),
        ),
      );
      
      // ì´ˆê¸° ìƒíƒœ í™•ì¸: 3ê°œ ì•Œë¦¼ í‘œì‹œ
      expect(find.byType(AlertCard), findsNWidgets(3));
      
      // "Battery" í•„í„° íƒ­
      await tester.tap(find.text('Battery'));
      await tester.pumpAndSettle();
      
      // "Battery Low"ë§Œ í‘œì‹œë˜ì–´ì•¼ í•¨
      expect(find.byType(AlertCard), findsOneWidget);
      expect(find.text('Battery Low'), findsOneWidget);
      
      // ì²« ë²ˆì§¸ ì¹´ë“œ í™•ì¸ ì²˜ë¦¬
      await tester.tap(find.byKey(Key('alert_action_A001_acknowledge')));
      await tester.pumpAndSettle();
      
      // ìƒíƒœ ë³€ê²½ í™•ì¸
      expect(find.textContaining('ACKNOWLEDGED'), findsOneWidget);
    });
  });
}
```

#### 2. ì‘ì—… ì§€ì‹œ ìƒì„± í¼ í…ŒìŠ¤íŠ¸
```dart
// test/create_wo_form_test.dart
void main() {
  group('CreateWorkOrder Widget Tests', () {
    testWidgets('Step validation and auto-priority by type', (tester) async {
      await tester.pumpWidget(
        ProviderScope(
          overrides: [
            cartRepositoryProvider.overrideWithValue(mockCartRepository),
            workOrderRepositoryProvider.overrideWithValue(mockWorkOrderRepository),
          ],
          child: MaterialApp(home: CreateWorkOrderPage()),
        ),
      );
      
      // Step 1: Type & Priority
      // Next ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆì–´ì•¼ í•¨
      expect(tester.widget<ElevatedButton>(find.widgetWithText(ElevatedButton, 'Next')).enabled, isFalse);
      
      // "Battery Service" ì„ íƒ â†’ P2 ìë™ ì„¤ì •
      await tester.tap(find.text('Battery'));
      await tester.pump();
      expect(find.text('Priority: P2'), findsOneWidget);
      
      // ì„¤ëª… ì…ë ¥ (ìµœì†Œ 10ì)
      await tester.enterText(find.byKey(const Key('wo.description_field')), 'Replace low battery pack');
      await tester.pump();
      
      // Next ë²„íŠ¼ì´ í™œì„±í™”ë˜ì–´ì•¼ í•¨
      expect(tester.widget<ElevatedButton>(find.widgetWithText(ElevatedButton, 'Next')).enabled, isTrue);
    });
  });
}
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
flutter test

# íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
flutter test test/kpi_calculator_test.dart

# í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ìƒì„±
flutter test --coverage
```

---

## ğŸ”„ Mock vs Real API ì „í™˜

### Provider ì˜¤ë²„ë¼ì´ë“œ ì „ëµ

#### 1. Main App ì„¤ì • ì—…ë°ì´íŠ¸
```dart
// lib/main.dart
void main() {
  runApp(ProviderScope(
    overrides: [
      // Mock ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‹¤ì œ êµ¬í˜„ìœ¼ë¡œ êµì²´
      cartRepositoryProvider.overrideWithValue(
        RestCartRepository(httpClient),
      ),
      workOrderRepositoryProvider.overrideWithValue(
        RestWoRepository(httpClient),
      ),
      alertRepositoryProvider.overrideWithValue(
        RestAlertRepository(wsClient),
      ),
      analyticsRepositoryProvider.overrideWithValue(
        RestAnalyticsRepository(httpClient),
      ),
    ],
    child: const App(),
  ));
}
```

#### 2. í™˜ê²½ë³„ ì„¤ì •
```dart
// lib/core/config/environment.dart
enum Environment { development, staging, production }

class AppConfig {
  static Environment get current => 
      const String.fromEnvironment('ENV', defaultValue: 'development') == 'production'
          ? Environment.production
          : Environment.development;
  
  static List<Override> get providerOverrides {
    switch (current) {
      case Environment.development:
        return []; // Mock í”„ë¡œë°”ì´ë” ì‚¬ìš©
      case Environment.staging:
        return _stagingOverrides;
      case Environment.production:
        return _productionOverrides;
    }
  }
}
```

### REST API ì—”ë“œí¬ì¸íŠ¸

#### Cart ì—”ë“œí¬ì¸íŠ¸
```dart
class RestCartRepository implements CartRepository {
  final HttpClient httpClient;
  
  @override
  Future<List<Cart>> list({CartFilter? filter}) async {
    final queryParams = _buildQueryParams(filter);
    final response = await httpClient.get(
      Uri.parse('$baseUrl/carts?$queryParams'),
      headers: await _getHeaders(),
    );
    
    if (response.statusCode == 200) {
      final json = jsonDecode(response.body) as List;
      return json.map((e) => Cart.fromJson(e)).toList();
    }
    
    throw CartRepositoryException('Failed to fetch carts: ${response.statusCode}');
  }
}
```

**API ì—”ë“œí¬ì¸íŠ¸:**
- `GET /carts` - ì¹´íŠ¸ ëª©ë¡ ì¡°íšŒ (í•„í„°ë§ ì§€ì›)
- `GET /carts/:id` - íŠ¹ì • ì¹´íŠ¸ ì¡°íšŒ
- `POST /carts` - ìƒˆ ì¹´íŠ¸ ìƒì„±
- `PUT /carts/:id` - ì¹´íŠ¸ ì •ë³´ ì—…ë°ì´íŠ¸
- `DELETE /carts/:id` - ì¹´íŠ¸ ì‚­ì œ

#### Work Order ì—”ë“œí¬ì¸íŠ¸
**API ì—”ë“œí¬ì¸íŠ¸:**
- `GET /work-orders` - ì‘ì—… ì§€ì‹œì„œ ëª©ë¡ ì¡°íšŒ
- `GET /work-orders/:id` - íŠ¹ì • ì‘ì—… ì§€ì‹œì„œ ì¡°íšŒ
- `POST /work-orders` - ìƒˆ ì‘ì—… ì§€ì‹œì„œ ìƒì„±
- `PUT /work-orders/:id` - ì‘ì—… ì§€ì‹œì„œ ì—…ë°ì´íŠ¸
- `PATCH /work-orders/:id/status` - ì‘ì—… ì§€ì‹œì„œ ìƒíƒœ ì—…ë°ì´íŠ¸
- `DELETE /work-orders/:id` - ì‘ì—… ì§€ì‹œì„œ ì‚­ì œ

#### Alert ì—”ë“œí¬ì¸íŠ¸
**API ì—”ë“œí¬ì¸íŠ¸:**
- `GET /alerts` - ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ
- `GET /alerts/:id` - íŠ¹ì • ì•Œë¦¼ ì¡°íšŒ
- `POST /alerts/:id/acknowledge` - ì•Œë¦¼ í™•ì¸ ì²˜ë¦¬
- `POST /alerts/:id/escalate` - ì•Œë¦¼ ì—ìŠ¤ì»¬ë ˆì´ì…˜
- `POST /alerts/:id/resolve` - ì•Œë¦¼ í•´ê²° ì²˜ë¦¬
- `POST /alerts/mark-all-read` - ëª¨ë“  ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
- `PATCH /alerts/mute` - ì•Œë¦¼ ìŒì†Œê±° í† ê¸€

### WebSocket í†µí•©

#### ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¼
```dart
class WebSocketAlertRepository implements AlertRepository {
  final WebSocketChannel channel;
  final StreamController<Alert> _alertController = StreamController.broadcast();
  
  WebSocketAlertRepository(this.channel) {
    _setupWebSocket();
  }
  
  void _setupWebSocket() {
    channel.stream.listen((data) {
      final event = jsonDecode(data);
      switch (event['type']) {
        case 'alert_created':
          _alertController.add(Alert.fromJson(event['data']));
          break;
        case 'alert_updated':
          _alertController.add(Alert.fromJson(event['data']));
          break;
      }
    });
  }
  
  @override
  Stream<Alert> live() => _alertController.stream;
}
```

**WebSocket ì´ë²¤íŠ¸:**
- `telemetry_update` - ì‹¤ì‹œê°„ í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°
- `position_update` - ì¹´íŠ¸ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
- `alert_created` - ìƒˆ ì•Œë¦¼ ìƒì„±
- `alert_updated` - ì•Œë¦¼ ìƒíƒœ ë³€ê²½
- `work_order_updated` - ì‘ì—… ì§€ì‹œì„œ ìƒíƒœ ë³€ê²½

### ì¸ì¦

#### í† í° ê´€ë¦¬
```dart
class AuthTokenManager {
  String? _accessToken;
  String? _refreshToken;
  DateTime? _expiresAt;
  
  Future<String> getValidToken() async {
    if (_accessToken != null && _expiresAt != null && DateTime.now().isBefore(_expiresAt!)) {
      return _accessToken!;
    }
    
    if (_refreshToken != null) {
      await _refreshAccessToken();
      return _accessToken!;
    }
    
    throw AuthenticationException('No valid token available');
  }
  
  Future<void> _refreshAccessToken() async {
    final response = await httpClient.post(
      Uri.parse('$baseUrl/auth/refresh'),
      headers: {'Authorization': 'Bearer $_refreshToken'},
    );
    
    if (response.statusCode == 200) {
      final data = jsonDecode(response.body);
      _accessToken = data['access_token'];
      _expiresAt = DateTime.now().add(Duration(seconds: data['expires_in']));
    } else {
      throw AuthenticationException('Token refresh failed');
    }
  }
}
```

### í™˜ê²½ ì„¤ì •

#### í™˜ê²½ ë³€ìˆ˜
```dart
class ApiConfig {
  static String get baseUrl => const String.fromEnvironment(
    'API_BASE_URL',
    defaultValue: 'https://api.aprofleet.com',
  );
  
  static String get wsUrl => const String.fromEnvironment(
    'WS_BASE_URL',
    defaultValue: 'wss://ws.aprofleet.com',
  );
  
  static Duration get timeout => Duration(
    seconds: const int.fromEnvironment('API_TIMEOUT', defaultValue: 30),
  );
  
  static int get maxRetries => const int.fromEnvironment('API_MAX_RETRIES', defaultValue: 3);
}
```

---

## ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ

### ì»¬ëŸ¬ í† í°

#### ë°°ê²½ ìƒ‰ìƒ
```dart
class AppColors {
  // Primary backgrounds
  static const Color primaryBackground = Color(0xFF000000);      // ìˆœìˆ˜ ê²€ì •
  static const Color secondaryBackground = Color(0xFF0A0A0A);   // ì–´ë‘ìš´ íšŒìƒ‰
  static const Color surfaceBackground = Color(0xFF1A1A1A);     // ì¹´ë“œ ë°°ê²½
  
  // Border colors
  static const Color borderPrimary = Color(0x1FFFFFFF);         // 12% íˆ¬ëª…ë„ í°ìƒ‰
  static const Color borderSecondary = Color(0x0DFFFFFF);      // 5% íˆ¬ëª…ë„ í°ìƒ‰
  static const Color borderAccent = Color(0x33FFFFFF);         // 20% íˆ¬ëª…ë„ í°ìƒ‰
}
```

#### ìš°ì„ ìˆœìœ„ ìƒ‰ìƒ
```dart
class PriorityColors {
  static const Color p1 = Color(0xFFEF4444);  // ë¹¨ê°• - Critical/Emergency
  static const Color p2 = Color(0xFFF97316);  // ì£¼í™© - High Priority
  static const Color p3 = Color(0xFF3B82F6);   // íŒŒë‘ - Medium Priority
  static const Color p4 = Color(0xFF22C55E);   // ì´ˆë¡ - Low Priority
}
```

#### ì•Œë¦¼ ì‹¬ê°ë„ ìƒ‰ìƒ
```dart
class AlertColors {
  static const Color critical = Color(0xFFEF4444);  // ë¹¨ê°•
  static const Color warning = Color(0xFFF97316);   // ì£¼í™©
  static const Color info = Color(0xFF3B82F6);     // íŒŒë‘
  static const Color success = Color(0xFF22C55E);  // ì´ˆë¡
}
```

#### ìƒíƒœ ìƒ‰ìƒ
```dart
class StatusColors {
  static const Color active = Color(0xFF22C55E);      // ì´ˆë¡
  static const Color idle = Color(0xFF6B7280);        // íšŒìƒ‰
  static const Color charging = Color(0xFF3B82F6);    // íŒŒë‘
  static const Color maintenance = Color(0xFFF97316); // ì£¼í™©
  static const Color offline = Color(0xFFEF4444);     // ë¹¨ê°•
}
```

### íƒ€ì´í¬ê·¸ë˜í”¼

#### í°íŠ¸ íŒ¨ë°€ë¦¬
- **Primary**: SF Pro Display (iOS) / Roboto (Android)
- **Monospace**: SF Mono (iOS) / Roboto Mono (Android)

#### í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼
```dart
class AppTextStyles {
  // Headers
  static const TextStyle h1 = TextStyle(
    fontSize: 32,
    fontWeight: FontWeight.w700,
    letterSpacing: 1.2,
    color: Colors.white,
  );
  
  static const TextStyle h2 = TextStyle(
    fontSize: 24,
    fontWeight: FontWeight.w600,
    letterSpacing: 1.0,
    color: Colors.white,
  );
  
  // Body text
  static const TextStyle bodyLarge = TextStyle(
    fontSize: 16,
    fontWeight: FontWeight.w400,
    color: Colors.white,
  );
  
  // Labels
  static const TextStyle labelLarge = TextStyle(
    fontSize: 14,
    fontWeight: FontWeight.w600,
    letterSpacing: 0.5,
    color: Colors.white,
  );
  
  // KPI/Numeric
  static const TextStyle kpiLarge = TextStyle(
    fontSize: 24,
    fontWeight: FontWeight.w700,
    fontFeatures: [FontFeature.tabularFigures()],
    color: Colors.white,
  );
}
```

### ê°„ê²© ì‹œìŠ¤í…œ

#### ê¸°ë³¸ ë‹¨ìœ„
- **Base**: 4px
- **Scale**: 4, 8, 12, 16, 20, 24, 32, 40, 48, 64, 80, 96

#### ê°„ê²© í† í°
```dart
class AppSpacing {
  static const double xs = 4.0;    // 0.25rem
  static const double sm = 8.0;    // 0.5rem
  static const double md = 12.0;   // 0.75rem
  static const double lg = 16.0;   // 1rem
  static const double xl = 20.0;   // 1.25rem
  static const double xxl = 24.0;  // 1.5rem
  static const double xxxl = 32.0; // 2rem
}
```

### ë³´ë” ë°˜ê²½

#### ë³´ë” ë°˜ê²½ í† í°
```dart
class AppBorderRadius {
  static const double none = 0.0;
  static const double xs = 4.0;
  static const double sm = 8.0;
  static const double md = 12.0;
  static const double lg = 16.0;
  static const double xl = 20.0;
  static const double xxl = 24.0;
  static const double full = 9999.0;
}
```

#### ì»´í¬ë„ŒíŠ¸ë³„ ë³´ë” ë°˜ê²½
```dart
class ComponentBorderRadius {
  // Cards
  static const BorderRadius card = BorderRadius.all(Radius.circular(12));
  
  // Buttons
  static const BorderRadius button = BorderRadius.all(Radius.circular(8));
  
  // Chips/Badges
  static const BorderRadius chip = BorderRadius.all(Radius.circular(16));
}
```

### ê·¸ë¦¼ì

#### ê·¸ë¦¼ì í† í°
```dart
class AppShadows {
  static const BoxShadow z1 = BoxShadow(
    color: Color(0x1A000000),
    blurRadius: 4,
    offset: Offset(0, 2),
  );
  
  static const BoxShadow z2 = BoxShadow(
    color: Color(0x1A000000),
    blurRadius: 8,
    offset: Offset(0, 4),
  );
  
  static const BoxShadow z3 = BoxShadow(
    color: Color(0x1A000000),
    blurRadius: 12,
    offset: Offset(0, 6),
  );
  
  static const BoxShadow z4 = BoxShadow(
    color: Color(0x1A000000),
    blurRadius: 16,
    offset: Offset(0, 8),
  );
}
```

### ì‚¬ìš© ì˜ˆì‹œ

#### ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
```dart
Container(
  padding: ComponentSpacing.cardPadding,
  decoration: BoxDecoration(
    color: AppColors.surfaceBackground,
    borderRadius: ComponentBorderRadius.card,
    border: Border.all(
      color: AppColors.borderPrimary,
      width: 1,
    ),
    boxShadow: ComponentShadows.card,
  ),
  child: Text(
    'Card Content',
    style: AppTextStyles.bodyMedium,
  ),
)
```

#### ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸
```dart
ElevatedButton(
  style: ElevatedButton.styleFrom(
    backgroundColor: PriorityColors.p1,
    foregroundColor: Colors.white,
    padding: ComponentSpacing.buttonPadding,
    shape: RoundedRectangleBorder(
      borderRadius: ComponentBorderRadius.button,
    ),
    elevation: 0,
  ),
  onPressed: () {},
  child: Text(
    'EMERGENCY STOP',
    style: AppTextStyles.labelLarge,
  ),
)
```

#### ìƒíƒœ ì¹©
```dart
Container(
  padding: EdgeInsets.symmetric(
    horizontal: AppSpacing.sm,
    vertical: AppSpacing.xs,
  ),
  decoration: BoxDecoration(
    color: StatusColors.active.withOpacity(0.2),
    borderRadius: ComponentBorderRadius.chip,
    border: Border.all(
      color: StatusColors.active.withOpacity(0.5),
      width: 1,
    ),
  ),
  child: Text(
    'ACTIVE',
    style: AppTextStyles.labelSmall.copyWith(
      color: StatusColors.active,
    ),
  ),
)
```

---

## ğŸ“ ì½”ë“œ í¬ë§· ê·œì¹™

### ID ìƒì„± ê·œì¹™

#### ì‘ì—… ì§€ì‹œì„œ ID
- **í˜•ì‹**: `WO-YYYY-####`
- **ì˜ˆì‹œ**: `WO-2025-0001`, `WO-2025-0002`
- **íŠ¹ì§•**: ì—°ë„ë³„ ì¹´ìš´í„°, 4ìë¦¬ ì œë¡œ íŒ¨ë”©

#### ì•Œë¦¼ ì½”ë“œ
- **í˜•ì‹**: `ALT-YYYY-####`
- **ì˜ˆì‹œ**: `ALT-2025-0001`, `ALT-2025-0002`
- **íŠ¹ì§•**: ì‘ì—… ì§€ì‹œì„œì™€ ë³„ë„ ì¹´ìš´í„° ê³µê°„ ìœ ì§€

#### ì¹´íŠ¸ ID
- **í˜•ì‹**: `GCA-###`
- **ì˜ˆì‹œ**: `GCA-001`, `GCA-002`
- **íŠ¹ì§•**: 3ìë¦¬ ì œë¡œ íŒ¨ë”©

### ì½”ë“œ í¬ë§·í„° êµ¬í˜„

#### ì‘ì—… ì§€ì‹œì„œ ID í¬ë§·í„°
```dart
class WorkOrderIdFormatter {
  final int seedYear;
  final int seedCounter;
  int _counter;
  
  WorkOrderIdFormatter({
    int? seedYear,
    int? seedCounter,
  }) : seedYear = seedYear ?? DateTime.now().year,
       seedCounter = seedCounter ?? 0,
       _counter = seedCounter ?? 0;
  
  String next() {
    _counter++;
    return 'WO-$seedYear-${_counter.toString().padLeft(4, '0')}';
  }
}
```

#### ì•Œë¦¼ ì½”ë“œ í¬ë§·í„°
```dart
class AlertCodeFormatter {
  final int seedYear;
  final int seedCounter;
  int _counter;
  
  AlertCodeFormatter({
    int? seedYear,
    int? seedCounter,
  }) : seedYear = seedYear ?? DateTime.now().year,
       seedCounter = seedCounter ?? 0,
       _counter = seedCounter ?? 0;
  
  String next() {
    _counter++;
    return 'ALT-$seedYear-${_counter.toString().padLeft(4, '0')}';
  }
}
```

### ì—°ë„ë³„ ì¹´ìš´í„° ë¡¤ì˜¤ë²„
- **ìë™ ë¡¤ì˜¤ë²„**: ìƒˆ ì—°ë„ ì‹œì‘ ì‹œ ì¹´ìš´í„° ìë™ ë¦¬ì…‹
- **ì—°ë„ë³„ ë…ë¦½**: ê° ì—°ë„ë§ˆë‹¤ ë³„ë„ ì¹´ìš´í„° ê³µê°„
- **ì§€ì†ì„±**: ì•± ì¬ì‹œì‘ ì‹œì—ë„ ì¹´ìš´í„° ìœ ì§€

---

## âš¡ ì„±ëŠ¥ ìµœì í™”

### Riverpod ì…€ë ‰í„°
ë¦¬ë¹Œë“œ ìµœì†Œí™”ë¥¼ ìœ„í•œ ì„¸ë°€í•œ ìƒíƒœ ì„ íƒ:

```dart
// ì „ì²´ ìƒíƒœ ëŒ€ì‹  íŠ¹ì • í•„ë“œë§Œ êµ¬ë…
final summaryCounts = ref.watch(alertControllerProvider.select(
  (state) => state.summaryCounts,
));

final unreadCount = ref.watch(alertControllerProvider.select(
  (state) => state.unreadCount,
));

// ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œë³„ ê°œë³„ êµ¬ë…
final cartStatus = ref.watch(cartControllerProvider.select(
  (state) => state.carts[cartId]?.status,
));
```

### ë¦¬ìŠ¤íŠ¸ ê°€ìƒí™”
ëª¨ë“  ë¦¬ìŠ¤íŠ¸ì—ì„œ ì§€ì—° ë¡œë”© ì‚¬ìš©:

```dart
// ListView.builder ì‚¬ìš©
ListView.builder(
  itemCount: items.length,
  itemBuilder: (context, index) {
    return CartCard(cart: items[index]);
  },
)

// SliverList ì‚¬ìš© (ë³µì¡í•œ ìŠ¤í¬ë¡¤ ì‹œë‚˜ë¦¬ì˜¤)
CustomScrollView(
  slivers: [
    SliverList(
      delegate: SliverChildBuilderDelegate(
        (context, index) => CartCard(cart: items[index]),
        childCount: items.length,
      ),
    ),
  ],
)
```

### ìŠ¤íŠ¸ë¦¼ ê´€ë¦¬
ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ êµ¬ë… ì ì ˆíˆ í•´ì œ:

```dart
class CartController extends StateNotifier<CartState> {
  StreamSubscription? _telemetrySubscription;
  StreamSubscription? _positionSubscription;
  
  @override
  void dispose() {
    _telemetrySubscription?.cancel();
    _positionSubscription?.cancel();
    super.dispose();
  }
  
  void _startSubscriptions() {
    _telemetrySubscription = ref.read(mockWsHubProvider).telemetryStream.listen(
      (telemetry) {
        // í…”ë ˆë©”íŠ¸ë¦¬ ì—…ë°ì´íŠ¸ ì²˜ë¦¬
      },
    );
  }
}
```

### ì´ë¯¸ì§€ ìµœì í™”
ì¸ë„¤ì¼ ë‹¤ìš´ìŠ¤ì¼€ì¼ ë° ìºì‹±:

```dart
class ImageOptimizer {
  static Future<Uint8List> optimizeImage(Uint8List imageData) async {
    final codec = await instantiateImageCodec(
      imageData,
      targetWidth: 200,
      targetHeight: 200,
    );
    final frame = await codec.getNextFrame();
    final byteData = await frame.image.toByteData(format: ImageByteFormat.png);
    return byteData!.buffer.asUint8List();
  }
}
```

### ë©”ëª¨ë¦¬ ê´€ë¦¬
- **ì´ë¯¸ì§€ ìºì‹œ**: ì ì ˆí•œ í¬ê¸°ë¡œ ì œí•œ
- **ìŠ¤íŠ¸ë¦¼ êµ¬ë…**: disposeì—ì„œ ìë™ í•´ì œ
- **ìœ„ì ¯ íŠ¸ë¦¬**: ë¶ˆí•„ìš”í•œ ìœ„ì ¯ ì œê±°

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ë¹Œë“œ ëŸ¬ë„ˆ ìºì‹œ
```bash
# ìºì‹œ í´ë¦°
dart run build_runner clean

# ì¬ìƒì„±
dart run build_runner build --delete-conflicting-outputs

# ê°ì‹œ ëª¨ë“œ (ê°œë°œ ì¤‘)
dart run build_runner watch
```

### iOS ê¶Œí•œ ëˆ„ë½
`ios/Runner/Info.plist` íŒŒì¼ í™•ì¸:

```xml
<key>NSCameraUsageDescription</key>
<string>ì´ ì•±ì€ ì¹´íŠ¸ ì‹ë³„ì„ ìœ„í•œ QR ì½”ë“œ ìŠ¤ìº”ì— ì¹´ë©”ë¼ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>ì´ ì•±ì€ ì¹´íŠ¸ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•´ ì‚¬ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.</string>
```

### Android ë¯¸ë””ì–´ ê¶Œí•œ
Android 13+ í™˜ê²½ì—ì„œ ë¯¸ë””ì–´ ê¶Œí•œ ì„¤ì •:

```xml
<!-- android/app/src/main/AndroidManifest.xml -->
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<!-- Android 13+ ë¯¸ë””ì–´ ê¶Œí•œ -->
<uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
<uses-permission android:name="android.permission.READ_MEDIA_VIDEO" />
```

### Flutter ë²„ì „ í™•ì¸
```bash
# Flutter ë²„ì „ í™•ì¸
flutter --version

# Flutter ì—…ê·¸ë ˆì´ë“œ
flutter upgrade

# ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
flutter pub upgrade
```

### ì¼ë°˜ì ì¸ ì˜¤ë¥˜ í•´ê²°

#### 1. ì˜ì¡´ì„± ì¶©ëŒ
```bash
# pubspec.lock ì‚­ì œ í›„ ì¬ì„¤ì¹˜
rm pubspec.lock
flutter pub get
```

#### 2. iOS ì‹œë®¬ë ˆì´í„° ë¬¸ì œ
```bash
# iOS ì‹œë®¬ë ˆì´í„° ì¬ì‹œì‘
xcrun simctl shutdown all
xcrun simctl boot "iPhone 14"
```

#### 3. Android ì—ë®¬ë ˆì´í„° ë¬¸ì œ
```bash
# Android ì—ë®¬ë ˆì´í„° ì¬ì‹œì‘
adb kill-server
adb start-server
```

#### 4. ë©”íƒ€ë°ì´í„° ì˜¤ë¥˜
```bash
# Flutter í´ë¦°
flutter clean
flutter pub get
dart run build_runner build --delete-conflicting-outputs
```

### ì„±ëŠ¥ ë¬¸ì œ

#### 1. ëŠë¦° ë¹Œë“œ
- **ì¦ë¶„ ë¹Œë“œ**: `dart run build_runner watch` ì‚¬ìš©
- **ë³‘ë ¬ ë¹Œë“œ**: `--delete-conflicting-outputs` í”Œë˜ê·¸ ì‚¬ìš©

#### 2. ë©”ëª¨ë¦¬ ë¶€ì¡±
- **ì´ë¯¸ì§€ ìµœì í™”**: ì¸ë„¤ì¼ í¬ê¸° ì œí•œ
- **ìŠ¤íŠ¸ë¦¼ ê´€ë¦¬**: ë¶ˆí•„ìš”í•œ êµ¬ë… í•´ì œ
- **ìœ„ì ¯ íŠ¸ë¦¬**: ê¹Šì´ ì œí•œ

#### 3. ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
- **íƒ€ì„ì•„ì›ƒ ì„¤ì •**: ì ì ˆí•œ íƒ€ì„ì•„ì›ƒ ê°’ ì„¤ì •
- **ì¬ì‹œë„ ë¡œì§**: ì§€ìˆ˜ ë°±ì˜¤í”„ êµ¬í˜„
- **ì˜¤í”„ë¼ì¸ ëª¨ë“œ**: ë¡œì»¬ ìºì‹œ í™œìš©

---

## ğŸ“¤ ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥

### CSV í˜•ì‹

#### ì•Œë¦¼ ë‚´ë³´ë‚´ê¸°
```csv
id,code,severity,priority,state,cartId,createdAt,updatedAt,message
ALT-2025-0001,critical,P1,triggered,GCA-001,2025-01-27T10:30:00Z,2025-01-27T10:30:00Z,"Battery critical - immediate attention required"
ALT-2025-0002,warning,P2,acknowledged,GCA-002,2025-01-27T09:15:00Z,2025-01-27T09:20:00Z,"Maintenance due - schedule service"
```

#### ì‘ì—… ì§€ì‹œì„œ ë‚´ë³´ë‚´ê¸°
```csv
id,type,priority,status,cartId,technician,createdAt,completedAt,durationMin
WO-2025-0001,battery,P2,completed,GCA-001,John Smith,2025-01-27T08:00:00Z,2025-01-27T09:30:00Z,90
WO-2025-0002,preventive,P3,in_progress,GCA-002,Jane Doe,2025-01-27T10:00:00Z,,,
```

#### KPI ë‚´ë³´ë‚´ê¸°
```csv
rangeStart,rangeEnd,availability,mttrMin,utilizationKm,dailyDistanceKm
2025-01-20,2025-01-27,94.8,18,847,120.5
2025-01-13,2025-01-20,92.3,22,756,108.2
```

### íŒŒì¼ ìœ„ì¹˜

#### í´ë” êµ¬ì¡°
```
Documents/
â”œâ”€â”€ carts/
â”‚   â”œâ”€â”€ GCA-001/
â”‚   â”‚   â”œâ”€â”€ front.jpg
â”‚   â”‚   â”œâ”€â”€ side.jpg
â”‚   â”‚   â””â”€â”€ serial.jpg
â”‚   â””â”€â”€ GCA-002/
â”‚       â””â”€â”€ ...
â”œâ”€â”€ qr_labels/
â”‚   â”œâ”€â”€ GCA-001_qr.png
â”‚   â”œâ”€â”€ GCA-002_qr.png
â”‚   â””â”€â”€ ...
â””â”€â”€ exports/
    â”œâ”€â”€ alerts_2025-01-27.csv
    â”œâ”€â”€ work_orders_2025-01-27.csv
    â”œâ”€â”€ kpi_2025-01-27.csv
    â””â”€â”€ analytics_report_2025-01-27.pdf
```

#### íŒŒì¼ ê²½ë¡œ ìƒì„±
```dart
class FilePathManager {
  static Future<String> getCartImagePath(String cartId, String imageType) async {
    final directory = await getApplicationDocumentsDirectory();
    final cartDir = Directory('${directory.path}/carts/$cartId');
    if (!await cartDir.exists()) {
      await cartDir.create(recursive: true);
    }
    return '${cartDir.path}/$imageType.jpg';
  }
  
  static Future<String> getExportPath(String fileName) async {
    final directory = await getApplicationDocumentsDirectory();
    final exportDir = Directory('${directory.path}/exports');
    if (!await exportDir.exists()) {
      await exportDir.create(recursive: true);
    }
    return '${exportDir.path}/$fileName';
  }
}
```

### í—¤ë” í˜•ì‹

#### ê° ë°ì´í„° íƒ€ì…ë³„ ì»¬ëŸ¼

**ì•Œë¦¼ ë°ì´í„°:**
- `id`: ì•Œë¦¼ ê³ ìœ  ID
- `code`: ì•Œë¦¼ ì½”ë“œ (ALT-YYYY-####)
- `severity`: ì‹¬ê°ë„ (critical, warning, info, success)
- `priority`: ìš°ì„ ìˆœìœ„ (P1, P2, P3, P4)
- `state`: ìƒíƒœ (triggered, acknowledged, resolved)
- `cartId`: ê´€ë ¨ ì¹´íŠ¸ ID
- `createdAt`: ìƒì„± ì‹œê°„
- `updatedAt`: ì—…ë°ì´íŠ¸ ì‹œê°„
- `message`: ì•Œë¦¼ ë©”ì‹œì§€

**ì‘ì—… ì§€ì‹œì„œ ë°ì´í„°:**
- `id`: ì‘ì—… ì§€ì‹œì„œ ID (WO-YYYY-####)
- `type`: ì‘ì—… ìœ í˜• (emergency, preventive, battery, tire, safety, other)
- `priority`: ìš°ì„ ìˆœìœ„ (P1, P2, P3, P4)
- `status`: ìƒíƒœ (draft, pending, in_progress, completed, cancelled)
- `cartId`: ëŒ€ìƒ ì¹´íŠ¸ ID
- `technician`: ë‹´ë‹¹ ê¸°ìˆ ì
- `createdAt`: ìƒì„± ì‹œê°„
- `completedAt`: ì™„ë£Œ ì‹œê°„
- `durationMin`: ì†Œìš” ì‹œê°„ (ë¶„)

**KPI ë°ì´í„°:**
- `rangeStart`: ë¶„ì„ ì‹œì‘ ë‚ ì§œ
- `rangeEnd`: ë¶„ì„ ì¢…ë£Œ ë‚ ì§œ
- `availability`: ê°€ë™ë¥  (%)
- `mttrMin`: í‰ê·  ìˆ˜ë¦¬ ì‹œê°„ (ë¶„)
- `utilizationKm`: í™œìš©ë„ (km)
- `dailyDistanceKm`: ì¼ì¼ ì£¼í–‰ê±°ë¦¬ (km)

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### ì½”ë”© ìŠ¤íƒ€ì¼
Flutter/Dart ê³µì‹ ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜:

```dart
// í´ë˜ìŠ¤ëª…: PascalCase
class CartController extends StateNotifier<CartState> {
  // ë³€ìˆ˜ëª…: camelCase
  final String cartId;
  final DateTime createdAt;
  
  // ë©”ì„œë“œëª…: camelCase
  Future<void> updateCartStatus(CartStatus status) async {
    // êµ¬í˜„
  }
  
  // ìƒìˆ˜: camelCase
  static const String defaultStatus = 'active';
}
```

### í…ŒìŠ¤íŠ¸ ì¶”ê°€
ìƒˆ ê¸°ëŠ¥ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í•„ìˆ˜:

```dart
// ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
test('ìƒˆë¡œìš´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸', () {
  // Given
  final input = 'test_input';
  
  // When
  final result = newFunction(input);
  
  // Then
  expect(result, expectedOutput);
});

// ìœ„ì ¯ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
testWidgets('ìƒˆë¡œìš´ ìœ„ì ¯ í…ŒìŠ¤íŠ¸', (tester) async {
  await tester.pumpWidget(MyNewWidget());
  
  expect(find.text('Expected Text'), findsOneWidget);
});
```

### ë¬¸ì„œ ì—…ë°ì´íŠ¸
API ë³€ê²½ ì‹œ ë¬¸ì„œ ì—…ë°ì´íŠ¸ í•„ìˆ˜:

1. **README.md**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì„¤ëª… ì¶”ê°€
2. **API ë¬¸ì„œ**: ì—”ë“œí¬ì¸íŠ¸ ë³€ê²½ì‚¬í•­ ë°˜ì˜
3. **ì½”ë“œ ì£¼ì„**: ë³µì¡í•œ ë¡œì§ì— ëŒ€í•œ ì£¼ì„ ì¶”ê°€

### PR ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ì½”ë“œ í’ˆì§ˆ
- [ ] Flutter/Dart ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì½”ë“œ ë¦¬ë·° ìš”ì²­
- [ ] ì„±ëŠ¥ ì˜í–¥ ë¶„ì„

#### ë¬¸ì„œí™”
- [ ] README ì—…ë°ì´íŠ¸
- [ ] API ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [ ] ì½”ë“œ ì£¼ì„ ì¶”ê°€
- [ ] ë³€ê²½ì‚¬í•­ ìš”ì•½ ì‘ì„±

#### í…ŒìŠ¤íŠ¸
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€
- [ ] ìœ„ì ¯ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (í•„ìš”ì‹œ)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€ (í•„ìš”ì‹œ)
- [ ] ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì™„ë£Œ

#### ë°°í¬
- [ ] ë²„ì „ ë²ˆí˜¸ ì—…ë°ì´íŠ¸
- [ ] CHANGELOG ì—…ë°ì´íŠ¸
- [ ] ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] ë¹Œë“œ ì„±ê³µ í™•ì¸

### ê°œë°œ ì›Œí¬í”Œë¡œìš°

1. **ì´ìŠˆ ìƒì„±**: ê¸°ëŠ¥ ìš”ì²­ ë˜ëŠ” ë²„ê·¸ ë¦¬í¬íŠ¸
2. **ë¸Œëœì¹˜ ìƒì„±**: `feature/ê¸°ëŠ¥ëª…` ë˜ëŠ” `bugfix/ë²„ê·¸ëª…`
3. **ê°œë°œ**: ê¸°ëŠ¥ êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸ ì‘ì„±
4. **PR ìƒì„±**: ìƒì„¸í•œ ì„¤ëª…ê³¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ í¬í•¨
5. **ì½”ë“œ ë¦¬ë·°**: íŒ€ì› ë¦¬ë·° ë° í”¼ë“œë°± ë°˜ì˜
6. **ë³‘í•©**: ë©”ì¸ ë¸Œëœì¹˜ë¡œ ë³‘í•©
7. **ë°°í¬**: íƒœê·¸ ìƒì„± ë° ë¦´ë¦¬ìŠ¤

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤ ë° í¬ë ˆë”§

### í”„ë¡œì íŠ¸ ë¼ì´ì„ ìŠ¤
ì´ í”„ë¡œì íŠ¸ëŠ” **DY Innovate**ì˜ ë…ì  ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤.

```
Copyright (c) 2025 DY Innovate. All rights reserved.

ì´ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” DY Innovateì˜ ë…ì  ì†Œìœ ë¬¼ì´ë©°, 
ëª…ì‹œì ì¸ ì„œë©´ í—ˆê°€ ì—†ì´ëŠ” ë³µì œ, ë°°í¬, ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
```

### ì‚¬ìš© íŒ¨í‚¤ì§€ í¬ë ˆë”§

#### ì£¼ìš” ì˜ì¡´ì„±
- **Flutter**: Googleì˜ í¬ë¡œìŠ¤ í”Œë«í¼ UI í”„ë ˆì„ì›Œí¬
- **Riverpod**: ìƒíƒœ ê´€ë¦¬ ë° ì˜ì¡´ì„± ì£¼ì…
- **go_router**: ì„ ì–¸ì  ë¼ìš°íŒ…
- **freezed**: ë¶ˆë³€ ë°ì´í„° í´ë˜ìŠ¤ ìƒì„±
- **json_serializable**: JSON ì§ë ¬í™”
- **flutter_svg**: SVG ì•„ì´ì½˜ ì§€ì›
- **fl_chart**: ì°¨íŠ¸ ë° ê·¸ë˜í”„
- **mobile_scanner**: QR ì½”ë“œ ìŠ¤ìº”
- **qr_flutter**: QR ì½”ë“œ ìƒì„±
- **image_picker**: ì´ë¯¸ì§€ ì„ íƒ ë° ì´¬ì˜
- **path_provider**: íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼
- **web_socket_channel**: WebSocket í†µì‹ 
- **mocktail**: í…ŒìŠ¤íŠ¸ìš© ëª¨í‚¹ ë¼ì´ë¸ŒëŸ¬ë¦¬

#### ê°œë°œ ë„êµ¬
- **build_runner**: ì½”ë“œ ìƒì„± ë„êµ¬
- **flutter_lints**: ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
- **flutter_test**: í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

### ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ì„ ìŠ¤
ì´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ íŒ¨í‚¤ì§€ë“¤ì€ ê°ê°ì˜ ë¼ì´ì„ ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤:

- **MIT License**: flutter_svg, fl_chart, qr_flutter, path_provider
- **BSD License**: freezed, json_serializable, mocktail
- **Apache License**: Flutter, Riverpod, go_router

### ì—°ë½ì²˜
- **íšŒì‚¬**: DY Innovate
- **í”„ë¡œì íŠ¸**: AproFleet Manager App
- **ë¬¸ì˜**: ê°œë°œíŒ€ì— ë¬¸ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### ê¸°ìˆ  ì§€ì›
- **ë¬¸ì„œ**: ì´ READMEì™€ docs/ í´ë”ì˜ ìƒì„¸ ë¬¸ì„œ ì°¸ì¡°
- **ì´ìŠˆ**: GitHub Issuesë¥¼ í†µí•œ ë²„ê·¸ ë¦¬í¬íŠ¸ ë° ê¸°ëŠ¥ ìš”ì²­
- **ì½”ë“œ ë¦¬ë·°**: Pull Requestë¥¼ í†µí•œ ì½”ë“œ ê°œì„  ì œì•ˆ

### ê°œë°œ í™˜ê²½ ì„¤ì • ë„ì›€
- **Flutter ì„¤ì¹˜**: [ê³µì‹ ë¬¸ì„œ](https://flutter.dev/docs/get-started/install)
- **IDE ì„¤ì •**: Android Studio ë˜ëŠ” VS Code ì„¤ì • ê°€ì´ë“œ
- **ë””ë²„ê¹…**: Flutter Inspector ë° ë””ë²„ê·¸ ë„êµ¬ ì‚¬ìš©ë²•

### ì¶”ê°€ ë¦¬ì†ŒìŠ¤
- **Flutter ê³µì‹ ë¬¸ì„œ**: https://flutter.dev/docs
- **Dart ì–¸ì–´ ê°€ì´ë“œ**: https://dart.dev/guides
- **Riverpod ë¬¸ì„œ**: https://riverpod.dev/docs/introduction
- **go_router ë¬¸ì„œ**: https://pub.dev/packages/go_router

---

*ì´ ë¬¸ì„œëŠ” AproFleet Manager Appì˜ í¬ê´„ì ì¸ ê°€ì´ë“œì…ë‹ˆë‹¤. ì¶”ê°€ ì§ˆë¬¸ì´ë‚˜ ê°œì„  ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ê°œë°œíŒ€ì— ë¬¸ì˜í•´ ì£¼ì„¸ìš”.*